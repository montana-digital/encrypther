---
/**
 * About Page
 * 
 * Information about EncryptHer's mission, founder, and core values.
 * Content is managed in src/content/about.md
 */

import { getEntry } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import Card from '../components/Card.astro';
import CTA from '../components/CTA.astro';
import FeatureGrid from '../components/sections/FeatureGrid.astro';

// Load content from markdown
const pageContent = await getEntry('about', 'about');
const { Content } = await pageContent.render();
const { hero, seo, structuredDataType, lastModified, cards, cta } = pageContent.data;

// Format dateModified for BaseLayout
const dateModifiedStr = lastModified?.toISOString().split('T')[0];
---

<BaseLayout
  title={seo.title}
  description={seo.description}
  structuredDataType={structuredDataType}
  dateModified={dateModifiedStr}
>
  <!-- Hero Section -->
  <Hero
    title={hero.title}
    subtitle={hero.subtitle}
    badge={hero.badge}
    badgeIcon={hero.badgeIcon}
    backgroundImage={hero.backgroundImage}
    glitchEffect={hero.glitchEffect}
  />

  <!-- Our Mission Section -->
  <section class="py-20 px-4 bg-background">
    <div class="container mx-auto max-w-4xl">
      <div class="text-center mb-16">
        <article class="prose prose-lg max-w-none text-center">
          <Content />
        </article>
      </div>
    </div>
  </section>

  <!-- Core Values Section -->
  {cards && cards.length > 0 && (
    <section class="py-20 px-4 bg-muted/50">
      <div class="container mx-auto max-w-6xl">
        <h2 class="text-4xl md:text-5xl font-extrabold text-center mb-12 text-foreground">Our Core Values</h2>
        <FeatureGrid columns={3}>
          {cards.map((card) => (
            <Card
              title={card.title}
              description={card.description}
              iconBg={card.iconBg}
              icon={card.icon}
            />
          ))}
        </FeatureGrid>
      </div>
    </section>
  )}

  <!-- CTA Section -->
  {cta && (
    <CTA
      title={cta.title}
      description={cta.description}
      primaryButton={cta.primaryButton}
      secondaryButton={cta.secondaryButton}
    />
  )}
</BaseLayout>
